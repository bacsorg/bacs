syntax = "proto3";

package bacs.external;

import "bacs/external/contest.proto";
import "bacs/external/language.proto";
import "bacs/external/result.proto";
import "bacs/external/submit.proto";

import "google/protobuf/empty.proto";

service Judge {
  rpc GetAllContestIds(google.protobuf.Empty) returns (Contest.IdList);
  rpc GetAllContests(google.protobuf.Empty) returns (ContestList);
  rpc GetContest(Contest.Id) returns (Contest);
  rpc GetProblem(Problem.Id) returns (Problem);

  rpc GetAllLanguages(google.protobuf.Empty) returns (LanguageList);

  rpc GetStatementUrl(Problem.Statement.Request)
      returns (Problem.Statement.Url);

  rpc Send(Submit) returns (result.Id);
  rpc SendAll(SubmitList) returns (result.IdList);

  // revision is not used
  rpc Rejudge(Submit.Id) returns (result.Id);
  rpc RejudgeAll(Submit.IdList) returns (result.IdList);

  rpc FetchResult(result.Id) returns (result.Submit);
  rpc FetchResultAll(result.IdList) returns (result.SubmitList);

  rpc FetchLatestResult(Submit.Id) returns (result.Submit);
  rpc FetchLatestResultAll(Submit.IdList) returns (result.SubmitList);

  rpc GetResultRevisions(Submit.Id) returns (result.MultipleId);
  rpc GetResultRevisionsAll(Submit.IdList) returns (result.MultipleIdList);
}
